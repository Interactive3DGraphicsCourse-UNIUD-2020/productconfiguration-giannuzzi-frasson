<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/style.css">

  <title>ACME | Rock Chair by Diesel</title>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-xl">
      <a class="navbar-brand" href="#">A.C.M.E.</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample07XL"
        aria-controls="navbarsExample07XL" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarsExample07XL">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Info</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="dropdown07XL" data-toggle="dropdown"
              aria-expanded="false">Products</a>
            <div class="dropdown-menu" aria-labelledby="dropdown07XL">
              <a class="dropdown-item" href="#">Chairs</a>
              <a class="dropdown-item" href="#">Lamps</a>
              <a class="dropdown-item" href="#">Rockets</a>
            </div>
          </li>
        </ul>
        <form class="form-inline my-2 my-md-0">
          <input class="form-control" type="text" placeholder="Search" aria-label="Search">
        </form>
      </div>
    </div>
  </nav>
  <div class="container-fluid">
    <div class="content-wrapper">
      <div class="item-container">
        <div class="container">
          <div class="row">

            <div class="col-md-6">
              <div class="product" id="parent">
                <canvas id="canvass" width="100" height="300"></canvas>
              </div>
            </div>
            <div class="col-md-6">
              <div class="product-title"> <b>Rock Chair</b> | Diesel with Moroso</div>
              <div class="product-desc">by Diesel Creative Team, 2010 Collection, in collaboration with Moroso.
                Rock Chair Inspired by the beautiful geometric structure of crystals and minerals which Nature creates
                in amazingly complex yet perfect formations, the Rock Chair combines the power and distinctive look of
                its sharp edges with the simple, ergonomic functionality of its seat.</div>
              <div class="product-rating"><i class="fa fa-star gold"></i> <i class="fa fa-star gold"></i> <i
                  class="fa fa-star gold"></i> <i class="fa fa-star gold"></i> <i class="fa fa-star-o"></i> </div>
              <hr>
              <div class="product-desc">Rock Chair is avviable in multiple colors and materials:</div>
              <br>
              <div class="product-desc"><b>Legs material:</b></div>
              <form action="">
                <input type="radio" name="legs" value="l-texture" checked="checked"> Wood
                <input type="radio" name="legs" value="l-golden"> Golden
                <input type="radio" name="legs" value="l-plastic"> Plastic
              </form>
              <div class="product-desc"><b>Seat material:</b></div>
              <form action="">
                <input type="radio" name="seat" value="s-texture" checked="checked"> Pillow
                <input type="radio" name="seat" value="s-golden"> Golden
                <input type="radio" name="seat" value="s-plastic"> Plastic
              </form>
              <div class="product-desc"><b>Structure material:</b></div>
              <form action="">
                <input type="radio" name="structure" value="st-texture" checked="checked"> Metal
                <input type="radio" name="structure" value="st-golden"> Golden
                <input type="radio" name="structure" value="st-plastic"> Plastic
              </form>
              <hr>
              <div class="product-price">$ 368.00</div>
              <div class="product-stock">In Stock</div>
              <hr>
              <div class="btn-group cart">
                <button type="button" class="btn btn-success">
                  Add to cart
                </button>
              </div>
              <div class="btn-group wishlist">
                <button type="button" class="btn btn-danger">
                  Add to wishlist
                </button>
              </div>
            </div>
          </div>


        </div>
      </div>
      <div class="container-fluid">
        <div class="col-md-12 product-info">
          <ul id="myTab" class="nav nav-tabs nav_tabs">

            <li class="active"><a href="#service-one" data-toggle="tab">DESCRIPTION</a></li>
            <li><a href="#service-two" data-toggle="tab">PRODUCT INFO</a></li>
            <li><a href="#service-three" data-toggle="tab">REVIEWS</a></li>

          </ul>
          <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade in active" id="service-one">

              <section class="container product-info">
                The Corsair Gaming Series GS600 power supply is the ideal price-performance solution for building or
                upgrading a Gaming PC. A single +12V rail provides up to 48A of reliable, continuous power for
                multi-core gaming PCs with multiple graphics cards. The ultra-quiet, dual ball-bearing fan automatically
                adjusts its speed according to temperature, so it will never intrude on your music and games. Blue LEDs
                bathe the transparent fan blades in a cool glow. Not feeling blue? You can turn off the lighting with
                the press of a button.

                <h3>Corsair Gaming Series GS600 Features:</h3>
                <li>It supports the latest ATX12V v2.3 standard and is backward compatible with ATX12V 2.2 and ATX12V
                  2.01 systems</li>
                <li>An ultra-quiet 140mm double ball-bearing fan delivers great airflow at an very low noise level by
                  varying fan speed in response to temperature</li>
                <li>80Plus certified to deliver 80% efficiency or higher at normal load conditions (20% to 100% load)
                </li>
                <li>0.99 Active Power Factor Correction provides clean and reliable power</li>
                <li>Universal AC input from 90~264V — no more hassle of flipping that tiny red switch to select the
                  voltage input!</li>
                <li>Extra long fully-sleeved cables support full tower chassis</li>
                <li>A three year warranty and lifetime access to Corsair’s legendary technical support and customer
                  service</li>
                <li>Over Current/Voltage/Power Protection, Under Voltage Protection and Short Circuit Protection provide
                  complete component safety</li>
                <li>Dimensions: 150mm(W) x 86mm(H) x 160mm(L)</li>
                <li>MTBF: 100,000 hours</li>
                <li>Safety Approvals: UL, CUL, CE, CB, FCC Class B, TÜV, CCC, C-tick</li>
              </section>

            </div>
            <div class="tab-pane fade" id="service-two">

              <section class="container">

              </section>

            </div>
            <div class="tab-pane fade" id="service-three">

            </div>
          </div>
          <hr>
        </div>
      </div>
    </div>
  </div>
  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="js/jquery-3.4.1.slim.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>

  <script src="libs/three.min.js"></script>
  <script src="libs/stats.min.js"></script>
  <script src="libs/OrbitControls.js"></script>
  <script src="libs/OBJLoader.js"></script>
  <script src='libs/dat.gui.min.js'></script>
  <script src='libs/shaders.js'></script>

  <!-- three.js code -->

  <script>
    var canvass = $('#canvass')[0];
    var parent = $('#parent')[0];
    var renderer = new THREE.WebGLRenderer({ canvas: canvass, antialiasing: true });
    var camera = new THREE.PerspectiveCamera(45, parent.clientWidth / parent.clientHeight, 1, 1000);
    var controls = new THREE.OrbitControls(camera, renderer.domElement);
    var scene = new THREE.Scene();

    //LIGHTS FOR SHADER

    // default: white, 1.0 intensity
    var lightParameters = {
      red: 1.0,
      green: 1.0,
      blue: 1.0,
      intensity: 1.0,
    }

    var ambientLightParameters = {
      red: 0.2,
      green: 0.2,
      blue: 0.2,
      intensity: 1.0,
    }

    //TEXTURE FOR SHADERS
    var textureParameters = {
      material: "Marble_Tiles_001",
      repeatS: 1.0,
      repeatT: 1.0,
      normalScale: 1.0,
      displacementScale: 0.0,
    }

    var textureParameters1 = {
      material: "Fabric_Padded_004_",
      repeatS: 0.2,
      repeatT: 0.2,
      normalScale: 3.0,
      displacementScale: 0.3,
    }

    var textureParameters2 = {
      material: "Wood_007_",
      repeatS: 0.3,
      repeatT: 1.5,
      normalScale: 2.0,
      displacementScale: 0.0,
    }

    //MATERIAL PARAMETER
    // default: gold
    var cspecGOLDEN = {
      red: 1.0,
      green: 0.71,
      blue: 0.29,
      roughness: 0.54
    }

    // default: red plastic
    var materialParameters = {
      cdiff_red: 0.7,
      cdiff_green: 0.0,
      cdiff_blue: 0.0,
      cspec_red: 0.04,
      cspec_green: 0.04,
      cspec_blue: 0.04,
      roughness: 0.10
    }

    //FUNCTION PER IL CORRETTO CARICAMENTO DELLE TEXTURE
    function loadTexture(file) {
      var texture = new THREE.TextureLoader().load(file, function (texture) {
        texture.minFilter = THREE.LinearMipMapLinearFilter;
        texture.anisotropy = renderer.capabilities.getMaxAnisotropy();
        texture.wrapS = texture.wrapT = THREE.RepeatWrapping;
        texture.offset.set(0, 0);
        texture.needsUpdate = true;
        render();
      })
      return texture;
    }

    //MAPPE PER LA TEXTURE
    var diffuseMap = loadTexture("textures/diesel/Metal_Painted_001_basecolor.jpg");
    var specularMap = loadTexture("textures/diesel/Metal_Painted_001_roughness.jpg");
    var roughnessMap = loadTexture("textures/diesel/Metal_Painted_001_roughness.jpg");
    var normalMap = loadTexture("textures/diesel/Metal_Painted_001_normal.jpg");
    var aoMap = loadTexture("textures/diesel/Metal_Painted_001_ambientOcclusion.jpg");
    var displacementMap = loadTexture("textures/diesel/Metal_Painted_001_height.png");

    var diffuseMap1 = loadTexture("textures/diesel/Fabric_Padded_004_basecolor.jpg");
    var specularMap1 = loadTexture("textures/diesel/Fabric_Padded_004_roughness.jpg");
    var roughnessMap1 = loadTexture("textures/diesel/Fabric_Padded_004_roughness.jpg");
    var normalMap1 = loadTexture("textures/diesel/Fabric_Padded_004_normal.jpg");
    var aoMap1 = loadTexture("textures/diesel/Fabric_Padded_004_ambientOcclusion.jpg");
    var displacementMap1 = loadTexture("textures/diesel/Fabric_Padded_004_height.png");

    var diffuseMap2 = loadTexture("textures/diesel/Old_Wood_001_COLOR.jpg");
    var specularMap2 = loadTexture("textures/diesel/Old_Wood_001_ROUGH.jpg");
    var roughnessMap2 = loadTexture("textures/diesel/Old_Wood_001_ROUGH.jpg");
    var normalMap2 = loadTexture("textures/diesel/Old_Wood_001_NORM.jpg");
    var aoMap2 = loadTexture("textures/diesel/Old_Wood_001_OCC.jpg");
    var displacementMap2 = loadTexture("textures/diesel/Old_Wood_001_DISP.png");


    //CUBEMAP
    var loader = new THREE.CubeTextureLoader();
    loader.setPath('textures/cubemap2/');
    var textureCube = loader.load([
      'px.png', 'nx.png',
      'py.png', 'ny.png',
      'pz.png', 'nz.png'
    ]);
    scene.background = textureCube;

    //SHADER UNIFORMS
    var uniforms = {
      uniforms: THREE.UniformsUtils.merge([
        THREE.UniformsLib['lights'],
        {
          lightIntensity: { type: 'f', value: 1.0 },
        }
      ]),
      specularMap: { type: "t", value: specularMap1 },
      diffuseMap: { type: "t", value: diffuseMap },
      roughnessMap: { type: "t", value: roughnessMap },
      normalMap: { type: "t", value: normalMap },
      aoMap: { type: "t", value: aoMap },
      displacementMap: { type: "t", value: displacementMap },
      displacementScale: { type: "f", value: 0.0 },
      normalScale: { type: "v2", value: new THREE.Vector2(1, 1) },
      spotLightPosition: { type: "v3", value: new THREE.Vector3() },
      spotLightPosition1: { type: "v3", value: new THREE.Vector3() },
      spotLightPosition2: { type: "v3", value: new THREE.Vector3() },
      clight: { type: "v3", value: new THREE.Vector3() },
      envMap: { type: "t", value: textureCube },
      ambientLight: { type: "v3", value: new THREE.Vector3() },
      textureRepeat: { type: "v2", value: new THREE.Vector2(1, 1) },
      lights: true,
    };

    var uniforms1 = {
      uniforms: THREE.UniformsUtils.merge([
        THREE.UniformsLib['lights'],
        {
          lightIntensity: { type: 'f', value: 1.0 },
        }
      ]),
      specularMap: { type: "t", value: specularMap1 },
      diffuseMap: { type: "t", value: diffuseMap1 },
      roughnessMap: { type: "t", value: roughnessMap1 },
      normalMap: { type: "t", value: normalMap1 },
      aoMap: { type: "t", value: aoMap1 },
      displacementMap: { type: "t", value: displacementMap1 },
      displacementScale: { type: "f", value: 0.0 },
      normalScale: { type: "v2", value: new THREE.Vector2(2, 2) },
      spotLightPosition: { type: "v3", value: new THREE.Vector3() },
      spotLightPosition1: { type: "v3", value: new THREE.Vector3() },
      spotLightPosition2: { type: "v3", value: new THREE.Vector3() },
      clight: { type: "v3", value: new THREE.Vector3() },
      envMap: { type: "t", value: textureCube },
      ambientLight: { type: "v3", value: new THREE.Vector3() },
      textureRepeat: { type: "v2", value: new THREE.Vector2(0.3, 0.3) },
      lights: true,
    };

    var uniforms2 = {
      uniforms: THREE.UniformsUtils.merge([
        THREE.UniformsLib['lights'],
        {
          lightIntensity: { type: 'f', value: 1.0 },
        }
      ]),
      specularMap: { type: "t", value: specularMap2 },
      diffuseMap: { type: "t", value: diffuseMap2 },
      roughnessMap: { type: "t", value: roughnessMap2 },
      normalMap: { type: "t", value: normalMap2 },
      aoMap: { type: "t", value: aoMap1 },
      displacementMap: { type: "t", value: displacementMap2 },
      displacementScale: { type: "f", value: 0.0 },
      normalScale: { type: "v2", value: new THREE.Vector2(1, 1) },
      pointLightPosition: { type: "v3", value: new THREE.Vector3() },
      pointLightPosition1: { type: "v3", value: new THREE.Vector3() },
      pointLightPosition2: { type: "v3", value: new THREE.Vector3() },
      clight: { type: "v3", value: new THREE.Vector3() },
      envMap: { type: "t", value: textureCube },
      ambientLight: { type: "v3", value: new THREE.Vector3() },
      textureRepeat: { type: "v2", value: new THREE.Vector2(1, 1) },
      lights: true,
    };

    var uniformsGOLDEN = {
      cspec: { type: "v3", value: new THREE.Vector3() },
      roughness: { type: "f", value: 0.5 },
      pointLightPosition: { type: "v3", value: new THREE.Vector3() },
      pointLightPosition1: { type: "v3", value: new THREE.Vector3() },
      pointLightPosition2: { type: "v3", value: new THREE.Vector3() },
      clight: { type: "v3", value: new THREE.Vector3() },
    };

    var uniformsPlastic = {
      cspec: { type: "v3", value: new THREE.Vector3() },
      cdiff: { type: "v3", value: new THREE.Vector3() },
      roughness: { type: "f", value: 0.5 },
      pointLightPosition: { type: "v3", value: new THREE.Vector3() },
      pointLightPosition1: { type: "v3", value: new THREE.Vector3() },
      pointLightPosition2: { type: "v3", value: new THREE.Vector3() },
      clight: { type: "v3", value: new THREE.Vector3() },
    };

    //CODICE DEGLI SHADER PRESENTE IN shader.js
    vs = vertexShader();
    fs = fragmentShader();
    fs1 = fragmentShader1();
    fsGOLDEN = fragmentShaderGOLDEN();
    fsPlastic = fragmentShaderPlastic();

    //PAVIMENTO
    var geo = new THREE.PlaneGeometry(1000, 1000, 100, 100);
    var mat = new THREE.MeshPhongMaterial({ color: 0xffffff });
    var plane = new THREE.Mesh(geo, mat);
    plane.rotateX(- Math.PI / 2);
    scene.add(plane);
    plane.castShadow = false;
    plane.receiveShadow = true;

    //DEFINIZIONE MATERIALE
    var ourMaterial = new THREE.ShaderMaterial({ uniforms: uniforms, vertexShader: vs, fragmentShader: fs });
    ourMaterial.extensions.derivatives = true;
    var ourMaterial1 = new THREE.ShaderMaterial({ uniforms: uniforms1, vertexShader: vs, fragmentShader: fs1 });
    ourMaterial1.extensions.derivatives = true;
    var ourMaterial2 = new THREE.ShaderMaterial({ uniforms: uniforms2, vertexShader: vs, fragmentShader: fs1 });
    ourMaterial2.extensions.derivatives = true;
    var ourMaterialGOLDEN = new THREE.ShaderMaterial({ uniforms: uniformsGOLDEN, vertexShader: vs, fragmentShader: fsGOLDEN });
    ourMaterialGOLDEN.extensions.derivatives = true;
    var ourMaterialPlastic = new THREE.ShaderMaterial({ uniforms: uniformsPlastic, vertexShader: vs, fragmentShader: fsPlastic });

    //carico oggetto       
    var loader = new THREE.OBJLoader();
    var seduta;
    var struttura;
    var gambe;
    var sedia = new THREE.Object3D()

    loader.load('models/sedia.obj', function (object) {
      //object.envMap = textureCube;				
      gambe = object.children[2];
      struttura = object.children[1];
      seduta = object.children[0];
      seduta.material = ourMaterial1;
      struttura.material = ourMaterial;
      gambe.material = ourMaterial2;

      gambe.castShadow = true;
      struttura.castShadow = true;
      seduta.castShadow = true;
      gambe.receiveShadow = true;
      struttura.receiveShadow = true;
      seduta.receiveShadow = true;

      sedia.add(seduta);
      sedia.add(struttura);
      sedia.add(gambe);
      render();
    });

    /*
    //LUCI        
hemiLight = new THREE.HemisphereLight( 0xffffff, 0xffffff, 0.2 );
hemiLight.color.setHSL( 0.6, 1, 0.6 );
hemiLight.groundColor.setHSL( 0.095, 1, 0.75 );
hemiLight.position.set( 0, 50, 0 );
    scene.add( hemiLight );
    
    dirLight = new THREE.DirectionalLight( 0xffffff, 1 );
dirLight.color.setHSL( 0.1, 1, 0.95 );
dirLight.position.set( - 1, 1.75, 1 );
dirLight.position.multiplyScalar( 30 );
scene.add( dirLight );
dirLight.castShadow = true;
dirLight.shadow.mapSize.width = 1024;
dirLight.shadow.mapSize.height = 1024;
dirLight.shadow.camera.far = 3500;
dirLight.shadow.bias = - 0.0001;
    */

    var light = new THREE.SpotLight(0xffffff, 0.8, 100, Math.PI / 2, 0.2, 2);//SpotLight( color : Integer, intensity : Float, distance : Float, angle : Radians, penumbra : Float, decay : Float )
    light.position.set(0.0, 25.0, -10.0);
    scene.add(light);

    var light1 = new THREE.SpotLight(0xd1e264, 0.8, 100, Math.PI / 3, 1, 8);
    light1.position.set(22.0, 19.0, -11.0);
    scene.add(light1);


    var light2 = new THREE.SpotLight(0x0f4c81, 0.8, 100, Math.PI / 3, 0.9, 6);
    light2.position.set(-28.0, 15.0, 3.0);
    scene.add(light2);

    uniforms.spotLightPosition.value = light.position;
    uniforms.spotLightPosition1.value = light1.position;
    uniforms.spotLightPosition2.value = light2.position;

    uniforms1.spotLightPosition.value = light.position;
    uniforms1.spotLightPosition1.value = light1.position;
    uniforms1.spotLightPosition2.value = light2.position;

    uniforms2.pointLightPosition.value = light.position;
    uniforms2.pointLightPosition1.value = light1.position;
    uniforms2.pointLightPosition2.value = light2.position;

    uniformsGOLDEN.pointLightPosition.value = light.position;
    uniformsGOLDEN.pointLightPosition1.value = light1.position;
    uniformsGOLDEN.pointLightPosition2.value = light2.position;

    uniformsPlastic.pointLightPosition.value = light.position;
    uniformsPlastic.pointLightPosition1.value = light1.position;
    uniformsPlastic.pointLightPosition2.value = light2.position;

    //modifico target delle luci altrimenti punta a (0, 0, 0);
    var targetObject = new THREE.Object3D();
    targetObject.position.x = 2;
    targetObject.position.y = 5;
    targetObject.position.z = 2;
    scene.add(targetObject);
    light1.target = targetObject;

    var targetObject2 = new THREE.Object3D();
    targetObject2.position.x = -3;
    targetObject2.position.y = 4;
    targetObject2.position.z = 2;
    scene.add(targetObject2);
    light2.target = targetObject2;


    var gui;
    var stats = new Stats();


    function init() {

      renderer.setClearColor(0xf0f0f0);

      //shadowmap
      renderer.shadowMap.enabled = true;
      renderer.shadowMap.type = THREE.PCFSoftShadowMap;
      light.castShadow = true;
      light1.castShadow = true;
      light2.castShadow = true;

      light.shadow.mapSize.width = 1024;
      light.shadow.mapSize.height = 1024;
      light1.shadow.mapSize.width = 1024;
      light1.shadow.mapSize.height = 1024;
      light2.shadow.mapSize.width = 1024;
      light2.shadow.mapSize.height = 1024;

      /*
      //debug luci
      var helper = new THREE.CameraHelper( light.shadow.camera );
      scene.add( helper );
      var helper2 = new THREE.CameraHelper( light1.shadow.camera );
      scene.add( helper2 );
      var helper3 = new THREE.CameraHelper( light2.shadow.camera );
      scene.add( helper3 );          
      */


      camera.position.set(-14, 6, 11);
      //camera.lookAt(0,10,0);
      scene.add(camera);
      scene.add(sedia);

      //IMPOSTIAMO QUI LE INFO DELLA CANVAS
      renderer.setPixelRatio(8);
      //renderer.setSize(window.innerWidth, window.innerHeight);

      controls.addEventListener('change', render);
      controls.minDistance = 10;
      controls.maxDistance = 40;
      //controls.maxPolarAngle = Math.PI / 2;
      controls.enablePan = false;
      controls.target.set(0, 5, 0);
      controls.update();
      window.addEventListener('resize', onResize, false);


      stats.domElement.style.position = 'absolute';
      stats.domElement.style.top = '0px';
      stats.domElement.style.paddingLeft = '10px';
      parent.appendChild(stats.domElement);



      ourMaterial.needsUpdate = true;

    }

    function onResize() {

      renderer.setSize(parent.clientWidth, parent.clientHeight);
      camera.aspect = (parent.clientWidth / parent.clientHeight);
      camera.updateProjectionMatrix();
      render();
    }

    function update() {
      requestAnimationFrame(update);
      stats.update();
    }

    function render() {
      updateUniforms();
      renderer.render(scene, camera);

    }

    function clearGui() {

      if (gui) gui.destroy();
      gui = new dat.GUI();
      gui.open();

    }

    function buildGui() {

      clearGui();
      lightSettings = gui.addFolder('Light Parameters');
      lightSettings.add(lightParameters, 'red').min(0).max(1).onChange(function (newVal) { render() });
      lightSettings.add(lightParameters, 'green').min(0).max(1).onChange(function (newVal) { render() });
      lightSettings.add(lightParameters, 'blue').min(0).max(1).onChange(function (newVal) { render() });
      lightSettings.add(lightParameters, 'intensity').min(0).max(3).onChange(function (newVal) { render() });

      textureSettings = gui.addFolder('Texture parameters');
      textureSettings.add(textureParameters, 'repeatS').min(0.1).max(10).onChange(function (newVal) { render() });
      textureSettings.add(textureParameters, 'repeatT').min(0.1).max(10).onChange(function (newVal) { render() });
      textureSettings.add(textureParameters, 'normalScale').min(-3).max(3).onChange(function (newVal) { render() });
      textureSettings.add(textureParameters, 'displacementScale').min(-3).max(3).onChange(function (newVal) { render() });

      textureSettings1 = gui.addFolder('Texture parameters1');
      textureSettings1.add(textureParameters1, 'repeatS').min(0.1).max(10).onChange(function (newVal) { render() });
      textureSettings1.add(textureParameters1, 'repeatT').min(0.1).max(10).onChange(function (newVal) { render() });
      textureSettings1.add(textureParameters1, 'normalScale').min(-3).max(3).onChange(function (newVal) { render() });
      textureSettings1.add(textureParameters1, 'displacementScale').min(-3).max(3).onChange(function (newVal) { render() });

      textureSettings2 = gui.addFolder('Texture parameters2');
      textureSettings2.add(textureParameters2, 'repeatS').min(0.1).max(10).onChange(function (newVal) { render() });
      textureSettings2.add(textureParameters2, 'repeatT').min(0.1).max(10).onChange(function (newVal) { render() });
      textureSettings2.add(textureParameters2, 'normalScale').min(-3).max(3).onChange(function (newVal) { render() });
      textureSettings2.add(textureParameters2, 'displacementScale').min(-3).max(3).onChange(function (newVal) { render() });

      parent.appendChild(gui.domElement);
    }


    function updateUniforms() {
      uniforms.clight.value = new THREE.Vector3(
        lightParameters.red * lightParameters.intensity,
        lightParameters.green * lightParameters.intensity,
        lightParameters.blue * lightParameters.intensity);
      uniforms.ambientLight.value = new THREE.Vector3(
        ambientLightParameters.red * ambientLightParameters.intensity,
        ambientLightParameters.green * ambientLightParameters.intensity,
        ambientLightParameters.blue * ambientLightParameters.intensity
      );
      uniforms.textureRepeat.value = new THREE.Vector2(textureParameters.repeatS, textureParameters.repeatT);
      uniforms.diffuseMap.value = diffuseMap;
      uniforms.specularMap.value = specularMap;
      uniforms.roughnessMap.value = roughnessMap;
      uniforms.normalMap.value = normalMap;
      uniforms.aoMap.value = aoMap;
      uniforms.displacementMap.value = displacementMap;
      uniforms.displacementScale.value = textureParameters.displacementScale;
      uniforms.normalScale.value = new THREE.Vector2(textureParameters.normalScale, textureParameters.normalScale);

      uniforms1.clight.value = new THREE.Vector3(
        lightParameters.red * lightParameters.intensity,
        lightParameters.green * lightParameters.intensity,
        lightParameters.blue * lightParameters.intensity);
      uniforms1.ambientLight.value = new THREE.Vector3(
        ambientLightParameters.red * ambientLightParameters.intensity,
        ambientLightParameters.green * ambientLightParameters.intensity,
        ambientLightParameters.blue * ambientLightParameters.intensity
      );
      uniforms1.textureRepeat.value = new THREE.Vector2(textureParameters1.repeatS, textureParameters1.repeatT);
      uniforms1.diffuseMap.value = diffuseMap1;
      uniforms1.specularMap.value = specularMap1;
      uniforms1.roughnessMap.value = roughnessMap1;
      uniforms1.normalMap.value = normalMap1;
      uniforms1.aoMap.value = aoMap1;
      uniforms1.displacementMap.value = displacementMap1;
      uniforms1.displacementScale.value = textureParameters1.displacementScale;
      uniforms1.normalScale.value = new THREE.Vector2(textureParameters1.normalScale, textureParameters1.normalScale);

      uniforms2.clight.value = new THREE.Vector3(
        lightParameters.red * lightParameters.intensity,
        lightParameters.green * lightParameters.intensity,
        lightParameters.blue * lightParameters.intensity);
      uniforms2.ambientLight.value = new THREE.Vector3(
        ambientLightParameters.red * ambientLightParameters.intensity,
        ambientLightParameters.green * ambientLightParameters.intensity,
        ambientLightParameters.blue * ambientLightParameters.intensity
      );
      uniforms2.textureRepeat.value = new THREE.Vector2(textureParameters2.repeatS, textureParameters2.repeatT);
      uniforms2.textureRepeat.value = new THREE.Vector2(textureParameters2.repeatS, textureParameters2.repeatT);
      uniforms2.diffuseMap.value = diffuseMap2;
      uniforms2.specularMap.value = specularMap2;
      uniforms2.roughnessMap.value = roughnessMap2;
      uniforms2.normalMap.value = normalMap2;
      uniforms2.aoMap.value = aoMap2;
      uniforms2.displacementMap.value = displacementMap2;
      uniforms2.displacementScale.value = textureParameters2.displacementScale;
      uniforms2.normalScale.value = new THREE.Vector2(textureParameters2.normalScale, textureParameters2.normalScale);


      uniformsGOLDEN.cspec.value = new THREE.Vector3(cspecGOLDEN.red, cspecGOLDEN.green, cspecGOLDEN.blue);
      uniformsGOLDEN.roughness.value = cspecGOLDEN.roughness > 0.0 ? cspecGOLDEN.roughness : 0.01;
      uniformsGOLDEN.clight.value = new THREE.Vector3(
        lightParameters.red * lightParameters.intensity,
        lightParameters.green * lightParameters.intensity,
        lightParameters.blue * lightParameters.intensity);

      uniformsPlastic.cspec.value = new THREE.Vector3(materialParameters.cspec_red,
        materialParameters.cspec_green, materialParameters.cspec_blue);
      uniformsPlastic.cdiff.value = new THREE.Vector3(materialParameters.cdiff_red,
        materialParameters.cdiff_green, materialParameters.cdiff_blue);
      uniformsPlastic.roughness.value = materialParameters.roughness > 0.0 ? materialParameters.roughness : 0.01;
      uniformsPlastic.clight.value = new THREE.Vector3(
        lightParameters.red * lightParameters.intensity,
        lightParameters.green * lightParameters.intensity,
        lightParameters.blue * lightParameters.intensity);
    }



    init();
    buildGui();
    update();
    render();

    $(document).ready(function () {
      $('input[type=radio]').click(function () {
        switch (this.value) {
          case "l-texture":
            gambe.material = ourMaterial2;
            break;
          case "l-plastic":
            gambe.material = ourMaterialPlastic
            break;
          case "l-golden":
            gambe.material = ourMaterialGOLDEN;
            break;
          case "s-texture":
            seduta.material = ourMaterial1;
            break;
          case "s-plastic":
            seduta.material = ourMaterialPlastic
            break;
          case "s-golden":
            seduta.material = ourMaterialGOLDEN;
            break;
          case "st-texture":
            struttura.material = ourMaterial;
            break;
          case "st-plastic":
            struttura.material = ourMaterialPlastic
            break;
          case "st-golden":
            struttura.material = ourMaterialGOLDEN;
            break;
          default:
            console.log(this);
            break;
        }
        render();
      });
    });
  </script>
</body>


</html>